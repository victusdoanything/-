<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SECURITY: Forces HTTPS -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    
    <title>VICTUS | DO ANYTHING </title>
    
    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Smooth Scroll Library -->
    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Manrope:wght@200;300;400;500;600;800&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font for Gallery -->
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        victus: {
                            void: '#050505',
                            charcoal: '#121212',
                            violet: '#8A2BE2',
                            lavender: '#D8B4FE',
                            glass: 'rgba(18, 18, 18, 0.6)',
                        }
                    },
                    fontFamily: {
                        display: ['Syncopate', 'sans-serif'],
                        brand: ['Cinzel', 'serif'],
                        body: ['Manrope', 'sans-serif'],
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMDUwNTA1Ii8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4wNSkiLz4KPC9zdmc+')",
                    }
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        body {
            @apply bg-victus-void text-white font-body overflow-x-hidden transition-colors duration-500;
        }
        
        /* Light Mode Overrides */
        html:not(.dark) body {
            @apply bg-gray-100 text-gray-900;
        }
        html:not(.dark) .text-white { color: #1a1a1a !important; }
        html:not(.dark) .text-gray-400 { color: #4a4a4a !important; }
        html:not(.dark) .bg-victus-void { background-color: #f3f4f6; }
        html:not(.dark) .bg-victus-charcoal\/95 { background-color: rgba(255, 255, 255, 0.85); } 
        html:not(.dark) .border-victus-violet\/50 { border-color: rgba(138, 43, 226, 0.3); }

        .bg-cinematic {
            background-color: #050505;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }
        html:not(.dark) .bg-cinematic {
            background-color: #f3f4f6;
            background-image: none;
        }

        /* --- IMMERSIVE CURSOR (Desktop Only) --- */
        @media (hover: hover) and (pointer: fine) {
            * { cursor: none !important; }
            #custom-cursor { display: block !important; }
        }

        #custom-cursor {
            display: none;
            position: fixed; top: 0; left: 0;
            width: 24px; height: 48px;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="48" viewBox="0 0 24 24"><path fill="%238A2BE2" d="M4.5.79v22.42l6.56-6.57h9.29L4.5.79z"></path></svg>');
            background-size: contain; background-repeat: no-repeat;
            pointer-events: none; z-index: 10000;
            transform: translate(-4px, -1px);
            filter: drop-shadow(0 0 5px rgba(138, 43, 226, 0.8));
        }

        /* --- HERO BUTTON --- */
        .uiverse-button {
            border: none; position: relative; width: 200px; height: 73px; padding: 0; z-index: 2;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='868' width='2500' viewBox='0 0 726 252.17'%3E%3Cpath d='M483.92 0S481.38 24.71 466 40.11c-11.74 11.74-24.09 12.66-40.26 15.07-9.42 1.41-29.7 3.77-34.81-.79-2.37-2.11-3-21-3.22-27.62-.21-6.92-1.36-16.52-2.82-18-.75 3.06-2.49 11.53-3.09 13.61S378.49 34.3 378 36a85.13 85.13 0 0 0-30.09 0c-.46-1.67-3.17-11.48-3.77-13.56s-2.34-10.55-3.09-13.61c-1.45 1.45-2.61 11.05-2.82 18-.21 6.67-.84 25.51-3.22 27.62-5.11 4.56-25.38 2.2-34.8.79-16.16-2.47-28.51-3.39-40.21-15.13C244.57 24.71 242 0 242 0H0s69.52 22.74 97.52 68.59c16.56 27.11 14.14 58.49 9.92 74.73C170 140 221.46 140 273 158.57c69.23 24.93 83.2 76.19 90 93.6 6.77-17.41 20.75-68.67 90-93.6 51.54-18.56 103-18.59 165.56-15.25-4.21-16.24-6.63-47.62 9.93-74.73C656.43 22.74 726 0 726 0z'/%3E%3C/svg%3E") no-repeat 50% 50%;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='868' width='2500' viewBox='0 0 726 252.17'%3E%3Cpath d='M483.92 0S481.38 24.71 466 40.11c-11.74 11.74-24.09 12.66-40.26 15.07-9.42 1.41-29.7 3.77-34.81-.79-2.37-2.11-3-21-3.22-27.62-.21-6.92-1.36-16.52-2.82-18-.75 3.06-2.49 11.53-3.09 13.61S378.49 34.3 378 36a85.13 85.13 0 0 0-30.09 0c-.46-1.67-3.17-11.48-3.77-13.56s-2.34-10.55-3.09-13.61c-1.45 1.45-2.61 11.05-2.82 18-.21 6.67-.84 25.51-3.22 27.62-5.11 4.56-25.38 2.2-34.8.79-16.16-2.47-28.51-3.39-40.21-15.13C244.57 24.71 242 0 242 0H0s69.52 22.74 97.52 68.59c16.56 27.11 14.14 58.49 9.92 74.73C170 140 221.46 140 273 158.57c69.23 24.93 83.2 76.19 90 93.6 6.77-17.41 20.75-68.67 90-93.6 51.54-18.56 103-18.59 165.56-15.25-4.21-16.24-6.63-47.62 9.93-74.73C656.43 22.74 726 0 726 0z'/%3E%3C/svg%3E") no-repeat 50% 50%;
            -webkit-mask-size: 100%; mask-size: 100%; background-color: transparent; transform: translateY(8px);
        }
        .hero-btn { background-color: #8A2BE2; }
        .uiverse-button:after { content: ''; position: absolute; left: 0; right: 0; bottom: 0; box-shadow: 0px 0 0 0 white; transition: all 2s ease; }
        .uiverse-button:hover:after { box-shadow: 0px -13px 56px 12px #ffffffa6; }
        .uiverse-button span { position: absolute; width: 100%; font-size: 15px; font-weight: 100; font-family: 'Cinzel', serif; left: 50%; top: 39%; letter-spacing: 3px; text-align: center; transform: translate(-50%,-50%); color: black; transition: all 2s ease; }
        .uiverse-button:hover span { color: white; }
        .uiverse-button:before { content: ''; position: absolute; width: 0; height: 100%; background-color: black; left: 50%; top: 50%; transform: translate(-50%, -50%); transition: all 1s ease; }
        .uiverse-button:hover:before { width: 100%; }

        /* --- BUBBLE MENU STYLES --- */
        .bubble-menu .menu-line { transition: transform 0.3s ease, opacity 0.3s ease; transform-origin: center; }
        .bubble-menu-items .pill-list .pill-col:nth-child(4):nth-last-child(2) { margin-left: calc(100% / 6); }
        .bubble-menu-items .pill-list .pill-col:nth-child(4):last-child { margin-left: calc(100% / 3); }
        @media (min-width: 900px) {
            .bubble-menu-items .pill-link { transform: rotate(var(--item-rot)); }
            .bubble-menu-items .pill-link:hover { transform: rotate(var(--item-rot)) scale(1.06); background: var(--hover-bg) !important; color: var(--hover-color) !important; }
            .bubble-menu-items .pill-link:active { transform: rotate(var(--item-rot)) scale(.94); }
        }
        @media (max-width: 899px) {
            .bubble-menu-items { padding-top: 120px; align-items: flex-start; overflow-y: auto; }
            .bubble-menu-items .pill-list { row-gap: 16px; }
            .bubble-menu-items .pill-list .pill-col { flex: 0 0 100% !important; margin-left: 0 !important; overflow: visible; }
            .bubble-menu-items .pill-link { font-size: clamp(1.2rem, 3vw, 4rem); padding: clamp(1rem, 2vw, 2rem) 0; min-height: 80px !important; }
            .bubble-menu-items .pill-link:hover { transform: scale(1.06); background: var(--hover-bg); color: var(--hover-color); }
            .bubble-menu-items .pill-link:active { transform: scale(.94); }
        }

        /* --- SCROLL STACK CARD ANIMATION --- */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .scroll-stack-card { will-change: transform; transform-origin: top center; backface-visibility: hidden; transform: translateZ(0); }

        /* --- RIGHT SIDE CONTROLS --- */
        .right-controls { position: fixed; top: 20px; right: 20px; z-index: 100; padding: 8px 12px; display: flex; align-items: center; gap: 15px; background-color: rgba(20, 20, 20, 0.6); backdrop-filter: blur(15px); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 50px; box-shadow: 0 10px 25px 0 rgba(0, 0, 0, 0.5); }
        
        /* Theme Switch */
        .theme-switch { --toggle-size: 10px; --container-width: 5.625em; --container-height: 2.5em; --container-radius: 6.25em; --container-light-bg: #3D7EAE; --container-night-bg: #1D1F2C; --circle-container-diameter: 3.375em; --sun-moon-diameter: 2.125em; --sun-bg: #ECCA2F; --moon-bg: #C4C9D1; --spot-color: #959DB1; --circle-container-offset: calc((var(--circle-container-diameter) - var(--container-height)) / 2 * -1); --stars-color: #fff; --clouds-color: #F3FDFF; --back-clouds-color: #AACADF; --transition: .5s cubic-bezier(0, -0.02, 0.4, 1.25); --circle-transition: .3s cubic-bezier(0, -0.02, 0.35, 1.17); }
        .theme-switch, .theme-switch *, .theme-switch *::before, .theme-switch *::after { box-sizing: border-box; margin: 0; padding: 0; font-size: var(--toggle-size); }
        .theme-switch__container { width: var(--container-width); height: var(--container-height); background-color: var(--container-light-bg); border-radius: var(--container-radius); overflow: hidden; cursor: pointer; position: relative; box-shadow: 0em -0.062em 0.062em rgba(0, 0, 0, 0.25), 0em 0.062em 0.125em rgba(255, 255, 255, 0.94); transition: var(--transition); }
        .theme-switch__container::before { content: ""; position: absolute; z-index: 1; inset: 0; box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0em 0.05em 0.187em rgba(0, 0, 0, 0.25) inset; border-radius: var(--container-radius) }
        .theme-switch__checkbox { display: none; }
        .theme-switch__circle-container { width: var(--circle-container-diameter); height: var(--circle-container-diameter); background-color: rgba(255, 255, 255, 0.1); position: absolute; left: var(--circle-container-offset); top: var(--circle-container-offset); border-radius: var(--container-radius); box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), 0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1); display: flex; transition: var(--circle-transition); pointer-events: none; }
        .theme-switch__sun-moon-container { pointer-events: auto; position: relative; z-index: 2; width: var(--sun-moon-diameter); height: var(--sun-moon-diameter); margin: auto; border-radius: var(--container-radius); background-color: var(--sun-bg); box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #a1872a inset; filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0em 0.062em 0.125em rgba(0, 0, 0, 0.25)); overflow: hidden; transition: var(--transition); }
        .theme-switch__moon { transform: translateX(100%); width: 100%; height: 100%; background-color: var(--moon-bg); border-radius: inherit; box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset, 0em -0.062em 0.062em 0em #969696 inset; transition: var(--transition); position: relative; }
        .theme-switch__spot { position: absolute; top: 0.75em; left: 0.312em; width: 0.75em; height: 0.75em; border-radius: var(--container-radius); background-color: var(--spot-color); box-shadow: 0em 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset; }
        .theme-switch__spot:nth-of-type(2) { width: 0.375em; height: 0.375em; top: 0.937em; left: 1.375em; }
        .theme-switch__spot:nth-last-of-type(3) { width: 0.25em; height: 0.25em; top: 0.312em; left: 0.812em; }
        .theme-switch__clouds { width: 1.25em; height: 1.25em; background-color: var(--clouds-color); border-radius: var(--container-radius); position: absolute; bottom: -0.625em; left: 0.312em; box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color), 1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color), 1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color), 3.625em -0.062em var(--clouds-color), 2.625em 0em var(--back-clouds-color), 4.5em -0.312em var(--clouds-color), 3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color), 4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color); transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25); }
        .theme-switch__stars-container { position: absolute; color: var(--stars-color); top: -100%; left: 0.312em; width: 2.75em; height: auto; transition: var(--transition); }
        .theme-switch__checkbox:checked + .theme-switch__container { background-color: var(--container-night-bg); }
        .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container { left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter)); }
        .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__circle-container:hover { left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter) - 0.187em) }
        .theme-switch__circle-container:hover { left: calc(var(--circle-container-offset) + 0.187em); }
        .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__moon { transform: translate(0); }
        .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__clouds { bottom: -4.062em; }
        .theme-switch__checkbox:checked + .theme-switch__container .theme-switch__stars-container { top: 50%; transform: translateY(-50%); }

        /* Profile Icon */
        .profile-btn { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #D8B4FE; border: 1px solid #8A2BE2; background: rgba(255,255,255,0.05); transition: all 0.3s; cursor: pointer; position: relative; }
        .profile-btn:hover { background: #8A2BE2; color: white; transform: scale(1.1); }
        .guest-status { position: absolute; top: 100%; right: 0; margin-top: 10px; background: rgba(0,0,0,0.8); border: 1px solid #8A2BE2; color: #D8B4FE; padding: 5px 10px; border-radius: 5px; font-size: 12px; white-space: nowrap; opacity: 0; transform: translateY(-10px); pointer-events: none; transition: all 0.3s ease; }
        .profile-btn.active .guest-status { opacity: 1; transform: translateY(0); }

        /* --- LOGO --- */
        .logo-box { position: fixed; top: 20px; left: 20px; z-index: 100; display: none; align-items: center; gap: 12px; padding: 8px 20px; background-color: rgba(20, 20, 20, 0.6); backdrop-filter: blur(15px); border: 1px solid rgba(138, 43, 226, 0.3); border-radius: 12px; box-shadow: 0 10px 25px 0 rgba(0, 0, 0, 0.5); transition: all 0.3s ease; }
        .logo-box:hover { border-color: rgba(216, 180, 254, 0.5); box-shadow: 0 0 20px rgba(138, 43, 226, 0.3); }
        .logo-icon-wrapper { width: 30px; height: 30px; position: relative; display: flex; align-items: center; justify-content: center; }
        .logo-btn { border: none; position: absolute; width: 200px; height: 73px; padding: 0; z-index: 2; -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='868' width='2500' viewBox='0 0 726 252.17'%3E%3Cpath d='M483.92 0S481.38 24.71 466 40.11c-11.74 11.74-24.09 12.66-40.26 15.07-9.42 1.41-29.7 3.77-34.81-.79-2.37-2.11-3-21-3.22-27.62-.21-6.92-1.36-16.52-2.82-18-.75 3.06-2.49 11.53-3.09 13.61S378.49 34.3 378 36a85.13 85.13 0 0 0-30.09 0c-.46-1.67-3.17-11.48-3.77-13.56s-2.34-10.55-3.09-13.61c-1.45 1.45-2.61 11.05-2.82 18-.21 6.67-.84 25.51-3.22 27.62-5.11 4.56-25.38 2.2-34.8.79-16.16-2.47-28.51-3.39-40.21-15.13C244.57 24.71 242 0 242 0H0s69.52 22.74 97.52 68.59c16.56 27.11 14.14 58.49 9.92 74.73C170 140 221.46 140 273 158.57c69.23 24.93 83.2 76.19 90 93.6 6.77-17.41 20.75-68.67 90-93.6 51.54-18.56 103-18.59 165.56-15.25-4.21-16.24-6.63-47.62 9.93-74.73C656.43 22.74 726 0 726 0z'/%3E%3C/svg%3E") no-repeat 50% 50%; -webkit-mask-size: 100%; mask-size: 100%; cursor: pointer; background-color: #8A2BE2; transform: scale(0.2); transform-origin: center; top: 50%; left: 50%; margin-top: -36.5px; margin-left: -100px; }
        .logo-btn span { position: absolute; width: 100%; font-size: 60px; font-family: 'Syncopate', sans-serif; font-weight: 700; left: 50%; top: 40%; text-align: center; transform: translate(-50%,-50%); color: black; }
        .logo-text { font-family: 'Syncopate', sans-serif; font-weight: 700; font-size: 1rem; color: white; letter-spacing: 2px; }
        .logo-divider { color: #8A2BE2; font-size: 1.2rem; opacity: 0.6; font-weight: 300; }

        /* --- CONTACT ICONS --- */
        .wrapper { display: inline-flex; list-style: none; height: 120px; width: 100%; padding-top: 40px; justify-content: center; flex-wrap: wrap; }
        .wrapper .icon { position: relative; background: #fff; border-radius: 50%; padding: 15px; margin: 10px; width: 50px; height: 50px; font-size: 18px; display: flex; justify-content: center; align-items: center; flex-direction: column; box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1); transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); cursor: pointer; }
        .wrapper .tooltip { position: absolute; top: 0; font-size: 14px; background: #fff; color: #fff; padding: 5px 8px; border-radius: 5px; box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1); opacity: 0; pointer-events: none; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
        .wrapper .tooltip::before { position: absolute; content: ""; height: 8px; width: 8px; background: #fff; bottom: -3px; left: 50%; transform: translate(-50%) rotate(45deg); }
        .wrapper .icon:hover .tooltip { top: -45px; opacity: 1; visibility: visible; }
        /* Replaced Generic Classes with Specific Brand Classes and Colors */
        .wrapper .whatsapp:hover, .wrapper .whatsapp:hover .tooltip, .wrapper .whatsapp:hover .tooltip::before { background: #25D366; color: #fff; } /* WhatsApp Green */
        .wrapper .gmail:hover, .wrapper .gmail:hover .tooltip, .wrapper .gmail:hover .tooltip::before { background: #EA4335; color: #fff; } /* Gmail Red */
        .wrapper .instagram:hover, .wrapper .instagram:hover .tooltip, .wrapper .instagram:hover .tooltip::before { background: #E4405F; color: #fff; } /* Instagram Pink */

        /* --- ANIMATIONS (Fireworks & Text) --- */
        #new-year-overlay { position: fixed; inset: 0; background: #000; z-index: 10001; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow: hidden; pointer-events: auto; }
        #new-year-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .new-year-text { font-family: 'Syncopate', sans-serif; font-weight: 700; font-size: 8vw; color: transparent; -webkit-text-stroke: 2px #FFD700; position: relative; z-index: 10; text-align: center; opacity: 0; transform: scale(0.5); pointer-events: none; }
        .new-year-sub { font-family: 'Cinzel', serif; color: #D8B4FE; font-size: 2vw; margin-top: 1rem; opacity: 0; letter-spacing: 0.5em; pointer-events: none; }
        
        /* Glass Slab for containers */
        .glass-slab { background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%); backdrop-filter: blur(20px); border: 1px solid rgba(138, 43, 226, 0.1); border-left: 1px solid rgba(138, 43, 226, 0.3); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }

        /* OGL Gallery Container */
        .circular-gallery-container {
            width: 100%; height: 80vh; overflow: hidden; position: relative;
            background: rgba(0,0,0,0.2); backdrop-filter: blur(5px);
            margin-bottom: 2rem;
            cursor: grab;
        }
        .circular-gallery-container:active { cursor: grabbing; }

        /* Truck Styles */
        .truck-loader { width: fit-content; height: fit-content; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        .truckWrapper { width: 200px; height: 100px; display: flex; flex-direction: column; position: relative; align-items: center; justify-content: flex-end; overflow-x: hidden; }
        .truckBody { width: 130px; height: fit-content; margin-bottom: 6px; animation: motion 1s linear infinite; }
        @keyframes motion { 0% { transform: translateY(0px); } 50% { transform: translateY(3px); } 100% { transform: translateY(0px); } }
        .truckTires { width: 130px; height: fit-content; display: flex; align-items: center; justify-content: space-between; padding: 0px 10px 0px 15px; position: absolute; bottom: 0; }
        .truckTires svg { width: 24px; }
        .road { width: 100%; height: 1.5px; background-color: #D8B4FE; position: relative; bottom: 0; align-self: flex-end; border-radius: 3px; }
        .road::before { content: ""; position: absolute; width: 20px; height: 100%; background-color: #D8B4FE; right: -50%; border-radius: 3px; animation: roadAnimation 1.4s linear infinite; border-left: 10px solid white; }
        .road::after { content: ""; position: absolute; width: 10px; height: 100%; background-color: #D8B4FE; right: -65%; border-radius: 3px; animation: roadAnimation 1.4s linear infinite; border-left: 4px solid white; }
        .lampPost { position: absolute; bottom: 0; right: -90%; height: 90px; animation: roadAnimation 1.4s linear infinite; }
        @keyframes roadAnimation { 0% { transform: translateX(0px); } 100% { transform: translateX(-350px); } }

        /* --- SPEEDER ANIMATION STYLES (THEMED PURPLE) --- */
        /* Updated to use Victus Purple (#8A2BE2) against a TRANSPARENT background for seamless UI */
        
        .speeder-section {
            background-color: transparent; /* TRANSPARENT BACKGROUND for seamless noise texture match */
            overflow: hidden; 
            margin: 0;
            height: 60vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 20; /* Increased z-index */
        }

        .speeder-loader {
            position: absolute;
            top: 50%;
            margin-left: -50px;
            left: 50%;
            animation: speeder 0.4s linear infinite;
            z-index: 10;
        }

        .speeder-loader > span {
            height: 5px;
            width: 35px;
            background: #8A2BE2; /* PURPLE */
            position: absolute;
            top: -19px;
            left: 60px;
            border-radius: 2px 10px 1px 0;
        }

        .speeder-base span {
            position: absolute;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-right: 100px solid #8A2BE2; /* PURPLE */
            border-bottom: 6px solid transparent;
        }

        .speeder-base span:before {
            content: "";
            height: 22px;
            width: 22px;
            border-radius: 50%;
            background: #8A2BE2; /* PURPLE */
            position: absolute;
            right: -110px;
            top: -16px;
        }

        .speeder-base span:after {
            content: "";
            position: absolute;
            width: 0;
            height: 0;
            border-top: 0 solid transparent;
            border-right: 55px solid #8A2BE2; /* PURPLE */
            border-bottom: 16px solid transparent;
            top: -16px;
            right: -98px;
        }

        .speeder-face {
            position: absolute;
            height: 12px;
            width: 20px;
            background: #8A2BE2; /* PURPLE */
            border-radius: 20px 20px 0 0;
            transform: rotate(-40deg);
            right: -125px;
            top: -15px;
        }

        .speeder-face:after {
            content: "";
            height: 12px;
            width: 12px;
            background: #8A2BE2; /* PURPLE */
            right: 4px;
            top: 7px;
            position: absolute;
            transform: rotate(40deg);
            transform-origin: 50% 50%;
            border-radius: 0 0 0 2px;
        }

        .speeder-loader > span > span:nth-child(1),
        .speeder-loader > span > span:nth-child(2),
        .speeder-loader > span > span:nth-child(3),
        .speeder-loader > span > span:nth-child(4) {
            width: 30px;
            height: 1px;
            background: #8A2BE2; /* PURPLE */
            position: absolute;
            animation: fazer1 0.2s linear infinite;
        }

        .speeder-loader > span > span:nth-child(2) {
            top: 3px;
            animation: fazer2 0.4s linear infinite;
        }

        .speeder-loader > span > span:nth-child(3) {
            top: 1px;
            animation: fazer3 0.4s linear infinite;
            animation-delay: -1s;
        }

        .speeder-loader > span > span:nth-child(4) {
            top: 4px;
            animation: fazer4 1s linear infinite;
            animation-delay: -1s;
        }

        @keyframes fazer1 {
            0% { left: 0; }
            100% { left: -80px; opacity: 0; }
        }

        @keyframes fazer2 {
            0% { left: 0; }
            100% { left: -100px; opacity: 0; }
        }

        @keyframes fazer3 {
            0% { left: 0; }
            100% { left: -50px; opacity: 0; }
        }

        @keyframes fazer4 {
            0% { left: 0; }
            100% { left: -150px; opacity: 0; }
        }

        @keyframes speeder {
            0% { transform: translate(2px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -3px) rotate(-1deg); }
            20% { transform: translate(-2px, 0px) rotate(1deg); }
            30% { transform: translate(1px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 3px) rotate(-1deg); }
            60% { transform: translate(-1px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-2px, -1px) rotate(1deg); }
            90% { transform: translate(2px, 1px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .speeder-longfazers {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .speeder-longfazers span {
            position: absolute;
            height: 2px;
            width: 20%;
            background: #8A2BE2; /* PURPLE */
        }

        .speeder-longfazers span:nth-child(1) {
            top: 20%;
            animation: lf 0.6s linear infinite;
            animation-delay: -5s;
        }

        .speeder-longfazers span:nth-child(2) {
            top: 40%;
            animation: lf2 0.8s linear infinite;
            animation-delay: -1s;
        }

        .speeder-longfazers span:nth-child(3) {
            top: 60%;
            animation: lf3 0.6s linear infinite;
        }

        .speeder-longfazers span:nth-child(4) {
            top: 80%;
            animation: lf4 0.5s linear infinite;
            animation-delay: -3s;
        }

        @keyframes lf {
            0% { left: 200%; }
            100% { left: -200%; opacity: 0; }
        }
        @keyframes lf2 {
            0% { left: 200%; }
            100% { left: -200%; opacity: 0; }
        }
        @keyframes lf3 {
            0% { left: 200%; }
            100% { left: -100%; opacity: 0; }
        }
        @keyframes lf4 {
            0% { left: 200%; }
            100% { left: -100%; opacity: 0; }
        }
    </style>
</head>
<body class="bg-cinematic selection:bg-victus-violet selection:text-white">

    <div id="custom-cursor"></div>

    <!-- Replaced Logo Box with Bubble Menu implementation (see bottom script) -->
    <!-- Kept in DOM but hidden via CSS for safe keeping -->
    <div class="logo-box">
        <div class="logo-icon-wrapper">
            <button class="logo-btn"><span>V</span></button>
        </div>
        <div class="logo-divider">|</div>
        <div class="logo-text">VICTUS</div>
    </div>

    <!-- HIDDEN Right Controls to avoid conflict with Bubble Menu Toggle -->
    <div class="right-controls" style="display: none;">
        <label class="theme-switch">
            <input type="checkbox" class="theme-switch__checkbox" id="theme-toggle-input-hidden">
            <div class="theme-switch__container">
                <div class="theme-switch__clouds"></div>
                <div class="theme-switch__stars-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                </div>
                <div class="theme-switch__circle-container">
                    <div class="theme-switch__sun-moon-container">
                        <div class="theme-switch__moon">
                            <div class="theme-switch__spot"></div>
                            <div class="theme-switch__spot"></div>
                            <div class="theme-switch__spot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </label>
        <button class="profile-btn" aria-label="Profile">
            <i data-lucide="user" class="w-4 h-4"></i>
            <div class="guest-status">Status: GUEST</div>
        </button>
    </div>

    <div id="new-year-overlay">
        <canvas id="new-year-canvas"></canvas>
        <div class="new-year-text">2026</div>
        <div class="new-year-sub">HAPPY NEW YEAR</div>
    </div>

    <div class="fixed top-0 right-0 w-[80vw] h-[80vw] bg-victus-violet rounded-full blur-[150px] opacity-[0.07] pointer-events-none translate-x-1/2 -translate-y-1/2 z-0"></div>
    <div class="fixed bottom-0 left-0 w-[60vw] h-[60vw] bg-victus-violet rounded-full blur-[150px] opacity-[0.03] pointer-events-none -translate-x-1/2 translate-y-1/2 z-0"></div>

    <!-- BUBBLE MENU ROOT (Replaces old nav-container) -->
    <div id="bubble-menu-root"></div>

    <!-- SMALL THEME SWITCHER BOTTOM RIGHT -->
    <!-- Replaced simple dot with the full switch as requested -->
    <div title="Toggle Theme" class="fixed bottom-6 right-6 z-[9999] transition-all duration-300 hover:scale-110" style="transform: scale(0.6); transform-origin: bottom right;">
        <label class="theme-switch">
            <input type="checkbox" class="theme-switch__checkbox" id="theme-toggle-input">
            <div class="theme-switch__container">
                <div class="theme-switch__clouds"></div>
                <div class="theme-switch__stars-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                </div>
                <div class="theme-switch__circle-container">
                    <div class="theme-switch__sun-moon-container">
                        <div class="theme-switch__moon">
                            <div class="theme-switch__spot"></div>
                            <div class="theme-switch__spot"></div>
                            <div class="theme-switch__spot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </label>
    </div>

    <section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-24 pb-20 md:pt-20 md:pb-40 text-center">
        <div id="canvas-container" class="absolute inset-0 z-0 pointer-events-none"></div>
        <div class="container mx-auto px-6 relative z-10 flex flex-col items-center justify-center h-full">
            <button class="uiverse-button hero-btn scale-75 md:scale-150 mb-4 md:mb-8 opacity-0 fade-in-up"><span>VICTUS</span></button>
            <h1 class="font-display text-4xl md:text-6xl font-bold leading-tight tracking-tighter mb-4 opacity-0 fade-in-up delay-100 mt-2">
                VICTUS - <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-victus-lavender glow-text">DO ANYTHING</span>
            </h1>
            <p class="font-body text-gray-400 text-lg md:text-xl tracking-wide max-w-2xl mx-auto mb-12 opacity-0 fade-in-up delay-200">
                WEB DEVELOPER & UI DESIGNER | GRAPHIC DESIGNER
            </p>
        </div>
    </section>

    <!-- OGL Gallery Module -->
    <script type="module">
        import { Renderer, Camera, Transform, Plane, Mesh, Program, Texture } from 'https://unpkg.com/ogl/src/index.js';

        {
            function lerp(p1, p2, t) { return p1 + (p2 - p1) * t; }

            class Media {
                constructor({ geometry, gl, image, index, length, renderer, scene, screen, text, viewport }) {
                    this.extra = 0;
                    this.geometry = geometry;
                    this.gl = gl;
                    this.image = image;
                    this.index = index;
                    this.length = length;
                    this.renderer = renderer;
                    this.scene = scene;
                    this.screen = screen;
                    this.text = text;
                    this.viewport = viewport;
                    this.createShader();
                    this.createMesh();
                    this.onResize();
                }
                createShader() {
                    const texture = new Texture(this.gl, { generateMipmaps: true });
                    this.program = new Program(this.gl, {
                        depthTest: false,
                        depthWrite: false,
                        vertex: `
                            precision highp float;
                            attribute vec3 position;
                            attribute vec2 uv;
                            uniform mat4 modelViewMatrix;
                            uniform mat4 projectionMatrix;
                            uniform float uTime;
                            uniform float uSpeed;
                            varying vec2 vUv;
                            void main() {
                                vUv = uv;
                                vec3 p = position;
                                p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);
                                gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
                            }
                        `,
                        fragment: `
                            precision highp float;
                            uniform vec2 uImageSizes;
                            uniform vec2 uPlaneSizes;
                            uniform sampler2D tMap;
                            varying vec2 vUv;
                            void main() {
                                vec2 ratio = vec2(
                                    min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
                                    min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
                                );
                                vec2 uv = vec2(
                                    vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
                                    vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
                                );
                                gl_FragColor = texture2D(tMap, uv);
                            }
                        `,
                        uniforms: {
                            tMap: { value: texture },
                            uPlaneSizes: { value: [0, 0] },
                            uImageSizes: { value: [0, 0] },
                            uSpeed: { value: 0 },
                            uTime: { value: 100 * Math.random() }
                        },
                        transparent: true
                    });
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    img.src = this.image;
                    img.onload = () => {
                        texture.image = img;
                        this.program.uniforms.uImageSizes.value = [img.naturalWidth, img.naturalHeight];
                    };
                }
                createMesh() {
                    this.plane = new Mesh(this.gl, { geometry: this.geometry, program: this.program });
                    this.plane.setParent(this.scene);
                }
                update(scroll, direction) {
                    this.plane.position.x = this.x - scroll.current - this.extra;
                    const x = this.plane.position.x;
                    const H = this.viewport.width / 2;
                    const B_abs = 3; 
                    const R = (H * H + B_abs * B_abs) / (2 * B_abs);
                    const effectiveX = Math.min(Math.abs(x), H);
                    const arc = R - Math.sqrt(R * R - effectiveX * effectiveX);
                    this.plane.position.y = -arc;
                    this.plane.rotation.z = -Math.sign(x) * Math.asin(effectiveX / R);
                    this.speed = scroll.current - scroll.last;
                    this.program.uniforms.uTime.value += 0.04;
                    this.program.uniforms.uSpeed.value = this.speed;
                    const planeOffset = this.plane.scale.x / 2;
                    const viewportOffset = this.viewport.width / 2;
                    this.isBefore = this.plane.position.x + planeOffset < -viewportOffset;
                    this.isAfter = this.plane.position.x - planeOffset > viewportOffset;
                    if (direction === 'right' && this.isBefore) {
                        this.extra -= this.widthTotal;
                        this.isBefore = this.isAfter = false;
                    }
                    if (direction === 'left' && this.isAfter) {
                        this.extra += this.widthTotal;
                        this.isBefore = this.isAfter = false;
                    }
                }
                onResize({ screen, viewport } = {}) {
                    if (screen) this.screen = screen;
                    if (viewport) this.viewport = viewport;
                    this.scale = this.screen.height / 1500;
                    this.plane.scale.y = (this.viewport.height * (900 * this.scale)) / this.screen.height;
                    this.plane.scale.x = (this.viewport.width * (700 * this.scale)) / this.screen.width;
                    this.plane.program.uniforms.uPlaneSizes.value = [this.plane.scale.x, this.plane.scale.y];
                    this.padding = 2;
                    this.width = this.plane.scale.x + this.padding;
                    this.widthTotal = this.width * this.length;
                    this.x = this.width * this.index;
                }
            }

            class App {
                constructor(container) {
                    this.container = container;
                    this.scroll = { ease: 0.05, current: 0, target: 0, last: 0 };
                    this.createRenderer();
                    this.createCamera();
                    this.createScene();
                    this.onResize();
                    this.createGeometry();
                    this.createMedias();
                    this.update();
                    this.addEventListeners();
                }
                createRenderer() {
                    this.renderer = new Renderer({ alpha: true, antialias: true, dpr: Math.min(window.devicePixelRatio || 1, 2) });
                    this.gl = this.renderer.gl;
                    this.gl.clearColor(0, 0, 0, 0);
                    this.container.appendChild(this.gl.canvas);
                }
                createCamera() {
                    this.camera = new Camera(this.gl);
                    this.camera.fov = 45;
                    this.camera.position.z = 20;
                }
                createScene() { this.scene = new Transform(); }
                createGeometry() {
                    this.planeGeometry = new Plane(this.gl, { heightSegments: 50, widthSegments: 100 });
                }
                createMedias() {
                    const items = [
                        { image: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=800&auto=format&fit=crop', text: 'Coding' },
                        { image: 'https://images.unsplash.com/photo-1581291518633-83b4ebd1d83e?q=80&w=800&auto=format&fit=crop', text: 'UI Design' },
                        { image: 'https://images.unsplash.com/photo-1626785774573-4b799312c95d?q=80&w=800&auto=format&fit=crop', text: 'Branding' },
                        { image: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=800&auto=format&fit=crop', text: 'Abstract' },
                        { image: 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=800&auto=format&fit=crop', text: 'Cyberpunk' },
                        { image: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=800&auto=format&fit=crop', text: 'Solutions' }
                    ];
                    // Duplicate for infinite scroll loop
                    const galleryItems = items.concat(items);
                    this.medias = galleryItems.map((data, index) => {
                        return new Media({
                            geometry: this.planeGeometry, gl: this.gl, image: data.image, index,
                            length: galleryItems.length, renderer: this.renderer, scene: this.scene,
                            screen: this.screen, text: data.text, viewport: this.viewport
                        });
                    });
                }
                onResize() {
                    this.screen = { width: this.container.clientWidth, height: this.container.clientHeight };
                    this.renderer.setSize(this.screen.width, this.screen.height);
                    this.camera.perspective({ aspect: this.screen.width / this.screen.height });
                    const fov = (this.camera.fov * Math.PI) / 180;
                    const height = 2 * Math.tan(fov / 2) * this.camera.position.z;
                    const width = height * this.camera.aspect;
                    this.viewport = { width, height };
                    if (this.medias) {
                        this.medias.forEach(media => media.onResize({ screen: this.screen, viewport: this.viewport }));
                    }
                }
                update() {
                    this.scroll.current = lerp(this.scroll.current, this.scroll.target, this.scroll.ease);
                    const direction = this.scroll.current > this.scroll.last ? 'right' : 'left';
                    if (this.medias) {
                        this.medias.forEach(media => media.update(this.scroll, direction));
                    }
                    this.renderer.render({ scene: this.scene, camera: this.camera });
                    this.scroll.last = this.scroll.current;
                    window.requestAnimationFrame(this.update.bind(this));
                }
                addEventListeners() {
                    window.addEventListener('resize', this.onResize.bind(this));
                    this.container.addEventListener('wheel', (e) => {
                         this.scroll.target += e.deltaY * 0.5;
                    });
                    // Touch logic simple
                    let touchStart = 0;
                    this.container.addEventListener('touchstart', (e) => { touchStart = e.touches[0].clientX; });
                    this.container.addEventListener('touchmove', (e) => {
                        const x = e.touches[0].clientX;
                        this.scroll.target += (touchStart - x) * 2;
                        touchStart = x;
                    });
                }
            }

            // Init Gallery
            window.addEventListener('load', () => {
                const container = document.getElementById('gl-gallery');
                if (container) new App(container);
            });
        }
    </script>

    <section id="gallery" class="relative z-10">
        <div id="gl-gallery" class="circular-gallery-container"></div>
    </section>

    <!-- NEW SECTION: SPEEDER ANIMATION (Purple Theme) -->
    <!-- MOVED HERE: Now positioned between Gallery and "We Can Do" (#work) -->
    <section class="speeder-section">
        <div class="speeder-loader">
            <!-- This span contains the "exhaust" lines trailing the bike -->
            <span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </span>
            
            <!-- The main body of the bike -->
            <div class="speeder-base">
                <span></span>
                <div class="speeder-face"></div>
            </div>
        </div>

        <!-- The background lines moving fast -->
        <div class="speeder-longfazers">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </section>

    <!-- CONTENT SECTION (Animated Folders / Scroll Stack) -->
    <section id="work" class="relative z-10">
        <!-- ScrollStack Container -->
        <div id="scroll-stack" class="relative w-full no-scrollbar">
            <!-- Increased top padding so the first card appears later after "We Can Do" -->
            <!-- Reduced bottom padding to 20vh to make footer accessible -->
            <div class="scroll-stack-inner pt-[5vh] px-4 md:px-20 pb-[20vh] min-h-screen max-w-4xl mx-auto flex flex-col items-center">
                
                <!-- Header / Intro -->
                <div class="mb-32 text-center pt-20">
                    <h2 class="font-display text-3xl md:text-5xl font-bold mb-4 text-white">WE CAN <span class="text-victus-violet">DO</span></h2>
                    <p class="text-gray-500 font-body">Scroll down to explore our services.</p>
                </div>

                <!-- Card 1: WEB DEV -->
                <a href="https://wa.me/919518848780?text=I%20am%20Interested%20In%20WEB%20DEVELOPMENT" target="_blank" class="scroll-stack-card relative w-full h-[400px] p-8 rounded-[40px] shadow-[0_0_30px_rgba(138,43,226,0.2)] bg-gradient-to-br from-blue-900 via-victus-charcoal to-black border border-blue-500/30 text-white flex flex-col justify-between cursor-pointer group hover:border-blue-500 transition-colors">
                    <div class="flex justify-between items-start">
                         <h2 class="text-3xl md:text-4xl font-bold font-display text-blue-400">WEB DEV</h2>
                         <i data-lucide="code-2" class="w-10 h-10 text-blue-400 opacity-80"></i>
                    </div>
                    <div>
                         <p class="text-xl opacity-90 font-body text-gray-200">React • Node • 3D Experiences</p>
                         <p class="text-sm mt-2 text-blue-300">Building immersive digital realities.</p>
                    </div>
                    <div class="text-9xl font-bold opacity-10 absolute bottom-4 right-8 font-display">01</div>
                    <div class="absolute bottom-8 right-8 text-sm font-bold text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity">CONNECT &gt;</div>
                </a>

                <!-- Card 2: WEB DESIGN -->
                <a href="https://wa.me/919518848780?text=I%20am%20Interested%20In%20WEB%20DESIGN" target="_blank" class="scroll-stack-card relative w-full h-[400px] p-8 rounded-[40px] shadow-[0_0_30px_rgba(138,43,226,0.2)] bg-gradient-to-br from-purple-900 via-victus-charcoal to-black border border-purple-500/30 text-white flex flex-col justify-between cursor-pointer group hover:border-purple-500 transition-colors">
                    <div class="flex justify-between items-start">
                        <h2 class="text-3xl md:text-4xl font-bold font-display text-purple-400">WEB DESIGN</h2>
                        <i data-lucide="pen-tool" class="w-10 h-10 text-purple-400 opacity-80"></i>
                    </div>
                    <div>
                        <p class="text-xl opacity-90 font-body text-gray-200">Figma • UI/UX • Spline</p>
                        <p class="text-sm mt-2 text-purple-300">Crafting intuitive and beautiful interfaces.</p>
                    </div>
                    <div class="text-9xl font-bold opacity-10 absolute bottom-4 right-8 font-display">02</div>
                    <div class="absolute bottom-8 right-8 text-sm font-bold text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity">CONNECT &gt;</div>
                </a>

                <!-- Card 3: GRAPHICS -->
                <a href="https://wa.me/919518848780?text=I%20am%20Interested%20In%20GRAPHIC%20DESIGN" target="_blank" class="scroll-stack-card relative w-full h-[400px] p-8 rounded-[40px] shadow-[0_0_30px_rgba(138,43,226,0.2)] bg-gradient-to-br from-pink-900 via-victus-charcoal to-black border border-pink-500/30 text-white flex flex-col justify-between cursor-pointer group hover:border-pink-500 transition-colors">
                    <div class="flex justify-between items-start">
                        <h2 class="text-3xl md:text-4xl font-bold font-display text-pink-400">GRAPHICS</h2>
                        <i data-lucide="palette" class="w-10 h-10 text-pink-400 opacity-80"></i>
                    </div>
                    <div>
                        <p class="text-xl opacity-90 font-body text-gray-200">Logos • Branding • Art</p>
                        <p class="text-sm mt-2 text-pink-300">Visual identity that speaks louder.</p>
                    </div>
                    <div class="text-9xl font-bold opacity-10 absolute bottom-4 right-8 font-display">03</div>
                    <div class="absolute bottom-8 right-8 text-sm font-bold text-pink-400 opacity-0 group-hover:opacity-100 transition-opacity">CONNECT &gt;</div>
                </a>

                <!-- Card 4: ASSETS -->
                <a href="https://wa.me/919518848780?text=I%20am%20Interested%20In%20ASSETS" target="_blank" class="scroll-stack-card relative w-full h-[400px] p-8 rounded-[40px] shadow-[0_0_30px_rgba(138,43,226,0.2)] bg-gradient-to-br from-orange-900 via-victus-charcoal to-black border border-orange-500/30 text-white flex flex-col justify-between cursor-pointer group hover:border-orange-500 transition-colors">
                    <div class="flex justify-between items-start">
                        <h2 class="text-3xl md:text-4xl font-bold font-display text-orange-400">ASSETS</h2>
                        <i data-lucide="image" class="w-10 h-10 text-orange-400 opacity-80"></i>
                    </div>
                    <div>
                        <p class="text-xl opacity-90 font-body text-gray-200">Posters • Banners • Ads</p>
                        <p class="text-sm mt-2 text-orange-300">High quality assets for your campaigns.</p>
                    </div>
                    <div class="text-9xl font-bold opacity-10 absolute bottom-4 right-8 font-display">04</div>
                    <div class="absolute bottom-8 right-8 text-sm font-bold text-orange-400 opacity-0 group-hover:opacity-100 transition-opacity">CONNECT &gt;</div>
                </a>

                <!-- Spacer element required for logic -->
                <div class="scroll-stack-end w-full h-px"></div>

            </div>
        </div>
    </section>

    <!-- TRUCK DELIVERY -->
    <!-- Added Z-Index 20 to ensure it sits above any potentially overlapping ScrollStack cards -->
    <section class="py-16 md:py-32 relative z-20">
        <div class="container mx-auto px-6">
            <div class="glass-slab p-8 md:p-12 rounded-3xl max-w-5xl mx-auto relative overflow-hidden flex flex-col items-center border-t border-victus-violet/20">
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] bg-victus-violet/10 rounded-full blur-[80px] pointer-events-none"></div>
                <h2 class="font-display text-2xl md:text-5xl font-bold mb-8 md:mb-16 uppercase tracking-wider relative z-10 text-center">
                    WE <span class="text-victus-violet">DELIVER</span> YOU BEST
                </h2>
                <div class="loader truck-loader relative z-10 scale-75 md:scale-125 origin-center">
                    <div class="truckWrapper">
                        <div class="truckBody">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 198 93" class="trucksvg"><path stroke-width="3" stroke="#D8B4FE" fill="#8A2BE2" d="M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"></path><path stroke-width="3" stroke="#D8B4FE" fill="#4B5563" d="M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"></path><path stroke-width="2" stroke="#D8B4FE" fill="#1F2937" d="M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"></path><rect stroke-width="2" stroke="#D8B4FE" fill="#FFFCAB" rx="1" height="7" width="5" y="63" x="187"></rect><rect stroke-width="2" stroke="#D8B4FE" fill="#1F2937" rx="1" height="11" width="4" y="81" x="193"></rect><rect stroke-width="3" stroke="#D8B4FE" fill="#8A2BE2" rx="2.5" height="90" width="121" y="1.5" x="6.5"></rect><rect stroke-width="2" stroke="#D8B4FE" fill="#D8B4FE" rx="2" height="4" width="6" y="84" x="1"></rect></svg>
                        </div>
                        <div class="truckTires"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 30" class="tiresvg"><circle stroke-width="3" stroke="#D8B4FE" fill="#1F2937" r="13.5" cy="15" cx="15"></circle><circle fill="#D8B4FE" r="7" cy="15" cx="15"></circle></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 30 30" class="tiresvg"><circle stroke-width="3" stroke="#D8B4FE" fill="#1F2937" r="13.5" cy="15" cx="15"></circle><circle fill="#D8B4FE" r="7" cy="15" cx="15"></circle></svg></div>
                        <div class="road"></div>
                        <svg xml:space="preserve" viewBox="0 0 453.459 453.459" xmlns="http://www.w3.org/2000/svg" class="lampPost" fill="#D8B4FE"><path d="M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0zM232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017h78.747C231.693,100.736,232.77,106.162,232.77,111.694z"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACT -->
    <!-- Added Z-Index 30 to ensure it is always clickable and visible -->
    <section id="contact" class="py-20 md:py-40 relative overflow-hidden text-center z-30">
        <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80')] bg-cover bg-center opacity-5 pointer-events-none"></div>
        <div class="container mx-auto px-6 relative z-10 glass-slab p-8 md:p-12 rounded-3xl max-w-4xl mx-auto">
            <h2 class="font-display text-3xl md:text-5xl lg:text-7xl font-bold mb-8 md:mb-12">CONTACT <span class="text-transparent bg-clip-text bg-gradient-to-r from-victus-violet to-victus-lavender">US</span></h2>
            <ul class="wrapper">
                <li class="icon whatsapp">
                    <span class="tooltip">WhatsApp</span>
                    <a href="https://wa.me/919518848780" target="_blank" class="flex items-center justify-center w-full h-full text-black"><svg viewBox="0 0 24 24" height="1.2em" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.017-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487 2.982 1.288 2.982.859 3.526.802.544-.058 1.758-.718 2.006-1.411.248-.695.248-1.29.173-1.414z"/></svg></a>
                </li>
                <li class="icon instagram">
                    <span class="tooltip">Instagram</span>
                    <a href="https://instagram.com/officialvictus" target="_blank" class="flex items-center justify-center w-full h-full text-black"><svg xmlns="http://www.w3.org/2000/svg" height="1.2em" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16"><path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"></path></svg></a>
                </li>
                <li class="icon gmail">
                    <span class="tooltip">Gmail</span>
                    <a href="mailto:victusdoanything@gmail.com" class="flex items-center justify-center w-full h-full text-black"><svg viewBox="0 0 24 24" height="1.2em" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg></a>
                </li>
            </ul>
            <p class="mt-12 md:mt-20 text-gray-600 text-[10px] md:text-xs tracking-[0.3em] font-mono">VICTUS - DO ANYTHING 2026. COPYRIGHT RESERVED &copy;</p>
        </div>
    </section>

    <!-- Global Scroll & Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- GLOBAL SMOOTH SCROLL INIT ---
            let lenis;
            if(typeof Lenis !== 'undefined') {
                lenis = new Lenis({
                    duration: 1.2,
                    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                    direction: 'vertical',
                    gestureDirection: 'vertical',
                    smooth: true,
                    mouseMultiplier: 1,
                    smoothTouch: false,
                    touchMultiplier: 2,
                });

                // INTEGRATE GSAP TICKER FOR PERFECT SYNC
                gsap.ticker.add((time) => {
                    lenis.raf(time * 1000); // Lenis requires MS
                });
                
                // Disable lag smoothing for smoother scroll
                gsap.ticker.lagSmoothing(0);

                window.lenis = lenis; // Expose for other scripts
            } else {
                console.warn('Lenis not loaded');
            }

            // --- SCROLL STACK CLASS ---
            class ScrollStack {
                constructor(containerElement, options = {}) {
                    this.container = containerElement;
                    this.config = {
                        itemDistance: options.itemDistance || 100,
                        itemScale: options.itemScale || 0.03,
                        itemStackDistance: options.itemStackDistance || 30,
                        stackPosition: options.stackPosition || '20%',
                        scaleEndPosition: options.scaleEndPosition || '10%',
                        baseScale: options.baseScale || 0.85,
                        rotationAmount: options.rotationAmount || 0,
                    };
                    this.cards = [];
                    this.lastTransforms = new Map();
                    this.metrics = []; 
                    this.init();
                }

                init() {
                    this.cards = Array.from(this.container.querySelectorAll('.scroll-stack-card'));
                    this.endElement = this.container.querySelector('.scroll-stack-end');

                    this.cards.forEach((card, i) => {
                        if (i < this.cards.length - 1) card.style.marginBottom = `${this.config.itemDistance}px`;
                        card.style.willChange = 'transform'; 
                        card.style.transformOrigin = 'top center';
                        card.style.backfaceVisibility = 'hidden';
                    });

                    this.calculateMetrics();
                    this.updateCardTransforms();

                    let resizeTimeout;
                    window.addEventListener('resize', () => {
                        clearTimeout(resizeTimeout);
                        resizeTimeout = setTimeout(() => {
                            this.calculateMetrics();
                            this.lastTransforms.clear();
                            this.updateCardTransforms();
                        }, 100);
                    });
                    
                    // CRITICAL FIX: Hook into Lenis scroll event if available, otherwise native scroll
                    if (window.lenis) {
                        window.lenis.on('scroll', () => this.updateCardTransforms());
                    } else {
                        window.addEventListener('scroll', () => this.updateCardTransforms());
                    }
                }

                parsePercentage(value, total) {
                    if (typeof value === 'string' && value.includes('%')) {
                        return (parseFloat(value) / 100) * total;
                    }
                    return parseFloat(value);
                }

                calculateMetrics() {
                    const windowHeight = window.innerHeight;
                    const scrollTop = window.scrollY; // Base calc on current position
                    const stackPositionPx = this.parsePercentage(this.config.stackPosition, windowHeight);
                    const scaleEndPositionPx = this.parsePercentage(this.config.scaleEndPosition, windowHeight);
                    const endElementRect = this.endElement ? this.endElement.getBoundingClientRect() : { top: 0 };
                    const endElementTop = endElementRect.top + scrollTop;
                    const pinEnd = endElementTop - (windowHeight / 2) - 400;

                    this.metrics = this.cards.map((card, i) => {
                        const rect = card.getBoundingClientRect();
                        const cardTop = rect.top + scrollTop; 
                        return {
                            card, cardTop,
                            triggerStart: cardTop - stackPositionPx - (this.config.itemStackDistance * i),
                            triggerEnd: cardTop - scaleEndPositionPx,
                            pinStart: cardTop - stackPositionPx - (this.config.itemStackDistance * i),
                            pinEnd: pinEnd,
                            stackPositionPx: stackPositionPx,
                            targetScale: this.config.baseScale + (i * this.config.itemScale),
                            stackOffset: stackPositionPx + (this.config.itemStackDistance * i)
                        };
                    });
                }

                updateCardTransforms() {
                    if (!this.cards.length) return;
                    const scrollTop = window.scrollY;

                    this.metrics.forEach((metric, i) => {
                        const { card, triggerStart, triggerEnd, pinStart, pinEnd, targetScale, stackOffset, cardTop } = metric;
                        let scaleProgress = 0;
                        if (scrollTop > triggerStart) {
                             if (scrollTop >= triggerEnd) scaleProgress = 1;
                             else scaleProgress = (scrollTop - triggerStart) / (triggerEnd - triggerStart);
                        }
                        const scale = 1 - scaleProgress * (1 - targetScale);
                        const rotation = this.config.rotationAmount ? i * this.config.rotationAmount * scaleProgress : 0;
                        let translateY = 0;
                        
                        if (scrollTop >= pinStart) {
                            if (scrollTop <= pinEnd) translateY = scrollTop - cardTop + stackOffset;
                            else translateY = pinEnd - cardTop + stackOffset;
                        }

                        const rTranslateY = Math.round(translateY * 100) / 100;
                        const rScale = Math.round(scale * 1000) / 1000;
                        const rRotation = Math.round(rotation * 100) / 100;
                        const lastTransform = this.lastTransforms.get(i);
                        
                        if (!lastTransform || Math.abs(lastTransform.translateY - rTranslateY) > 0.1 || Math.abs(lastTransform.scale - rScale) > 0.001) {
                            card.style.transform = `translate3d(0, ${rTranslateY}px, 0) scale(${rScale}) rotate(${rRotation}deg)`;
                            this.lastTransforms.set(i, { translateY: rTranslateY, scale: rScale, rotation: rRotation });
                        }
                    });
                }
            }

            // Init Scroll Stack
            const container = document.getElementById('scroll-stack');
            if(container) {
                new ScrollStack(container, {
                    itemDistance: 150, itemStackDistance: 30, stackPosition: '20%',
                    baseScale: 0.90, itemScale: 0.02,
                });
            }
        });
    </script>

    <!-- BUBBLE MENU LOGIC -->
    <script type="module">
        const DEFAULT_ITEMS = [
            { label: 'Home', href: '#', ariaLabel: 'Home', rotation: -8, hoverStyles: { bgColor: '#8A2BE2', textColor: '#ffffff' } },
            { label: 'Work', href: '#work', ariaLabel: 'Work', rotation: 8, hoverStyles: { bgColor: '#3b82f6', textColor: '#ffffff' } },
            { label: 'Chat', href: '#contact', ariaLabel: 'Chat', rotation: -8, hoverStyles: { bgColor: '#ef4444', textColor: '#ffffff' } }
        ];

        class BubbleMenu {
            constructor(containerId, options = {}) {
                this.container = document.getElementById(containerId);
                this.items = options.items || DEFAULT_ITEMS;
                this.menuBg = options.menuBg || 'rgba(255,255,255,0.9)';
                this.menuContentColor = options.menuContentColor || '#111';
                this.animationEase = options.animationEase || 'back.out(1.5)';
                this.animationDuration = options.animationDuration || 0.5;
                this.staggerDelay = options.staggerDelay || 0.12;
                this.useFixedPosition = options.useFixedPosition || false;
                this.isMenuOpen = false;
                this.init();
            }

            init() {
                this.render();
                this.cacheDOM();
                this.bindEvents();
                this.updateRotations(); 
            }

            render() {
                const navClasses = [ 'bubble-menu', this.useFixedPosition ? 'fixed' : 'absolute', 'left-0 right-0 top-8', 'flex items-center justify-between', 'gap-4 px-8', 'pointer-events-none', 'z-[1001]' ].join(' ');
                const logoHtml = `<div class="bubble logo-bubble inline-flex items-center justify-center rounded-full bg-white shadow-[0_4px_16px_rgba(0,0,0,0.12)] pointer-events-auto h-12 md:h-14 px-4 md:px-8 gap-2 will-change-transform" style="background: ${this.menuBg}; min-height: 48px; border-radius: 9999px;"><span class="logo-content inline-flex items-center justify-center w-[120px] h-full font-bold text-xl" style="color: ${this.menuContentColor}; font-family: 'Syncopate', sans-serif;">VICTUS</span></div>`;
                const toggleHtml = `<button type="button" id="menu-toggle-btn" class="bubble toggle-bubble menu-btn inline-flex flex-col items-center justify-center rounded-full bg-white shadow-[0_4px_16px_rgba(0,0,0,0.12)] pointer-events-auto w-12 h-12 md:w-14 md:h-14 border-0 cursor-pointer p-0 will-change-transform" style="background: ${this.menuBg}" aria-label="Toggle menu" aria-pressed="false"><span class="menu-line block mx-auto rounded-[2px]" style="width: 26px; height: 2px; background: ${this.menuContentColor};"></span><span class="menu-line short block mx-auto rounded-[2px]" style="margin-top: 6px; width: 26px; height: 2px; background: ${this.menuContentColor};"></span></button>`;
                const menuItemsHtml = this.items.map((item, idx) => {
                    const rot = item.rotation ?? 0;
                    const hoverBg = item.hoverStyles?.bgColor || '#f3f4f6';
                    const hoverColor = item.hoverStyles?.textColor || this.menuContentColor;
                    return `<li class="pill-col flex justify-center items-stretch box-border" style="flex: 0 0 calc(100%/3);"><a href="${item.href}" class="pill-link menu-item-bubble w-full rounded-[999px] no-underline bg-white text-inherit shadow-[0_4px_14px_rgba(0,0,0,0.10)] flex items-center justify-center relative transition-[background,color] duration-300 ease-in-out box-border whitespace-nowrap overflow-hidden" style="--item-rot: ${rot}deg; --pill-bg: ${this.menuBg}; --pill-color: ${this.menuContentColor}; --hover-bg: ${hoverBg}; --hover-color: ${hoverColor}; background: var(--pill-bg); color: var(--pill-color); min-height: var(--pill-min-h, 160px); padding: clamp(1.5rem, 3vw, 8rem) 0; font-size: clamp(1.5rem, 4vw, 4rem); font-weight: 400; line-height: 0; will-change: transform; height: 10px;" data-index="${idx}" data-rotation="${rot}"><span class="pill-label inline-block" style="will-change: transform, opacity; height: 1.2em; line-height: 1.2;">${item.label}</span></a></li>`;
                }).join('');
                const overlayHtml = `<div id="menu-overlay" class="bubble-menu-items ${this.useFixedPosition ? 'fixed' : 'absolute'} inset-0 flex items-center justify-center pointer-events-none z-[1000]" style="display: none;"><ul class="pill-list list-none m-0 px-6 w-full max-w-[1600px] mx-auto flex flex-wrap gap-x-0 gap-y-1 pointer-events-auto">${menuItemsHtml}</ul></div>`;
                this.container.innerHTML = `<nav class="${navClasses}">${logoHtml}${toggleHtml}</nav>${overlayHtml}`;
            }

            cacheDOM() {
                this.toggleBtn = document.getElementById('menu-toggle-btn');
                this.overlay = document.getElementById('menu-overlay');
                this.bubbles = Array.from(document.querySelectorAll('.menu-item-bubble'));
                this.labels = Array.from(document.querySelectorAll('.pill-label'));
                this.menuLines = Array.from(document.querySelectorAll('.menu-line'));
            }

            bindEvents() {
                this.toggleBtn.addEventListener('click', () => this.toggle());
                window.addEventListener('resize', () => this.updateRotations());
                this.bubbles.forEach(bubble => {
                    bubble.addEventListener('click', () => {
                        if(this.isMenuOpen) this.toggle();
                    });
                });
            }

            updateRotations() {
                if (!this.isMenuOpen) return;
                const isDesktop = window.innerWidth >= 900;
                this.bubbles.forEach((bubble) => {
                    const rotation = isDesktop ? (parseFloat(bubble.dataset.rotation) || 0) : 0;
                    gsap.set(bubble, { rotation: rotation });
                });
            }

            toggle() {
                this.isMenuOpen = !this.isMenuOpen;
                this.toggleBtn.setAttribute('aria-pressed', this.isMenuOpen);
                if (this.isMenuOpen) {
                    this.menuLines[0].style.transform = 'translateY(4px) rotate(45deg)';
                    this.menuLines[1].style.transform = 'translateY(-4px) rotate(-45deg)';
                    this.animateOpen();
                } else {
                    this.menuLines[0].style.transform = 'none';
                    this.menuLines[1].style.transform = 'none';
                    this.animateClose();
                }
            }

            animateOpen() {
                gsap.set(this.overlay, { display: 'flex' });
                gsap.killTweensOf([...this.bubbles, ...this.labels]);
                const isDesktop = window.innerWidth >= 900;
                this.bubbles.forEach(bubble => {
                   const rotation = isDesktop ? (parseFloat(bubble.dataset.rotation) || 0) : 0;
                   gsap.set(bubble, { scale: 0, rotation: rotation, transformOrigin: '50% 50%' });
                });
                gsap.set(this.labels, { y: 24, autoAlpha: 0 });
                this.bubbles.forEach((bubble, i) => {
                    const delay = i * this.staggerDelay + gsap.utils.random(-0.05, 0.05);
                    const tl = gsap.timeline({ delay });
                    tl.to(bubble, { scale: 1, duration: this.animationDuration, ease: this.animationEase });
                    if (this.labels[i]) {
                        tl.to(this.labels[i], { y: 0, autoAlpha: 1, duration: this.animationDuration, ease: 'power3.out' }, '-=' + this.animationDuration * 0.9);
                    }
                });
            }

            animateClose() {
                gsap.killTweensOf([...this.bubbles, ...this.labels]);
                gsap.to(this.labels, { y: 24, autoAlpha: 0, duration: 0.2, ease: 'power3.in' });
                gsap.to(this.bubbles, {
                    scale: 0, duration: 0.2, ease: 'power3.in',
                    onComplete: () => { gsap.set(this.overlay, { display: 'none' }); }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new BubbleMenu('bubble-menu-root', { useFixedPosition: true, menuContentColor: '#000000' });
        });
    </script>

    <script>
        if (typeof lucide !== 'undefined') lucide.createIcons();

        // --- Audio Engine ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let audioUnlocked = false;

        function playSound(type) {
            if (!audioUnlocked) {
                 if (audioCtx.state === 'suspended') audioCtx.resume().catch(() => {});
                 audioUnlocked = true;
            }
            if (audioCtx.state !== 'running') return;

            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            if (type === 'click') {
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
                osc.type = 'sine';
                osc.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'firework') {
                const filter = audioCtx.createBiquadFilter();
                const bufferSize = audioCtx.sampleRate * 0.2;
                const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) data[i] = Math.random() * 2 - 1;

                const noise = audioCtx.createBufferSource();
                noise.buffer = buffer;
                
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(1000, audioCtx.currentTime);
                filter.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.15);
                
                gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.8, audioCtx.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
                
                noise.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                noise.start();
                noise.stop(audioCtx.currentTime + 0.2);
            }
        }

        const unlockAudio = () => {
            if (audioCtx.state === 'suspended') audioCtx.resume().then(() => { audioUnlocked = true; });
            document.removeEventListener('click', unlockAudio);
        };
        document.addEventListener('click', unlockAudio);
        
        document.addEventListener('click', () => playSound('click'));

        // --- Auto Theme Logic ---
        function setAutoTheme() {
            const hour = new Date().getHours();
            const isDay = hour >= 6 && hour < 18; 
            const checkbox = document.getElementById('theme-toggle-input');
            const hiddenCheckbox = document.getElementById('theme-toggle-input-hidden');
            const html = document.documentElement;
            
            if (isDay) {
                html.classList.remove('dark');
                if(checkbox) checkbox.checked = false;
                if(hiddenCheckbox) hiddenCheckbox.checked = false;
            } else {
                html.classList.add('dark');
                if(checkbox) checkbox.checked = true;
                if(hiddenCheckbox) hiddenCheckbox.checked = true;
            }
        }
        
        window.addEventListener('load', () => {
            setAutoTheme();
            initFireworks();
            
            const tl = gsap.timeline();
            tl.to('.new-year-text', { opacity: 1, scale: 1.2, duration: 1, ease: "back.out(1.7)" })
              .to('.new-year-sub', { opacity: 1, y: 0, duration: 1 }, "-=0.5")
              .to('#new-year-overlay', { opacity: 0, duration: 1, delay: 3, onComplete: () => {
                   document.getElementById('new-year-overlay').style.display = 'none';
                   if(fireworksInterval) clearInterval(fireworksInterval);
                   initMainAnimations();
              }});
        });

        // --- Theme Switch Logic ---
        const themeCheckbox = document.getElementById('theme-toggle-input');
        
        if (themeCheckbox) {
            themeCheckbox.addEventListener('change', (e) => {
                if(e.target.checked) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            });
        }

        const profileBtn = document.querySelector('.profile-btn');
        if(profileBtn) {
            profileBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                profileBtn.classList.toggle('active');
                setTimeout(() => profileBtn.classList.remove('active'), 3000);
            });
        }

        // --- Fireworks System ---
        let fireworksInterval;
        function initFireworks() {
            const canvas = document.getElementById('new-year-canvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];

            function Particle(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.radius = Math.random() * 3 + 1;
                this.velocity = { x: Math.random() * 6 - 3, y: Math.random() * 6 - 3 };
                this.alpha = 1; this.friction = 0.95;
            }
            Particle.prototype.draw = function() {
                ctx.globalAlpha = this.alpha; ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = this.color; ctx.fill(); ctx.closePath();
            }
            Particle.prototype.update = function() {
                this.velocity.x *= this.friction; this.velocity.y *= this.friction;
                this.x += this.velocity.x; this.y += this.velocity.y; this.alpha -= 0.02;
            }
            function createFirework(x, y) {
                playSound('firework');
                const colors = ['#FFD700', '#8A2BE2', '#D8B4FE', '#FFFFFF'];
                for (let i = 0; i < 50; i++) particles.push(new Particle(x, y, colors[Math.floor(Math.random() * colors.length)]));
            }
            function animate() {
                requestAnimationFrame(animate);
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => { if (p.alpha > 0) { p.update(); p.draw(); } else particles.splice(i, 1); });
            }
            fireworksInterval = setInterval(() => {
                createFirework(Math.random() * canvas.width, Math.random() * (canvas.height / 2));
            }, 800);
            animate();
        }

        function initMainAnimations() {
            gsap.utils.toArray('.fade-in-up').forEach((el, i) => {
                gsap.to(el, { opacity: 1, y: 0, duration: 1, delay: i * 0.2, ease: "power3.out" });
            });
            gsap.utils.toArray('.glass-slab').forEach((card, i) => {
                gsap.from(card, {
                    scrollTrigger: { trigger: card, start: "top bottom" },
                    y: 100, opacity: 0, duration: 1, delay: i * 0.1, ease: "power2.out"
                });
            });
        }

        // --- Three.js Background ---
        function initThreeJS() {
            const container = document.getElementById('canvas-container');
            if (!container) return;
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);
            const group = new THREE.Group();
            const geomWire = new THREE.IcosahedronGeometry(4, 1);
            const matWire = new THREE.MeshBasicMaterial({ color: 0x8A2BE2, wireframe: true, transparent: true, opacity: 0.05 });
            const shards = new THREE.Mesh(geomWire, matWire);
            group.add(shards);
            
            const particleCount = window.innerWidth < 768 ? 200 : 450;
            const particleGeom = new THREE.BufferGeometry();
            const posArray = new Float32Array(particleCount * 3);
            for(let i=0; i<particleCount*3; i++) posArray[i] = (Math.random()-0.5)*15;
            particleGeom.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particles = new THREE.Points(particleGeom, new THREE.PointsMaterial({ size: 0.03, color: 0xD8B4FE, transparent: true, opacity: 0.6 }));
            group.add(particles);
            scene.add(group);
            function animate() {
                requestAnimationFrame(animate);
                group.rotation.x += 0.001; group.rotation.y += 0.001;
                renderer.render(scene, camera);
            }
            animate();
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            if (window.matchMedia("(pointer: fine)").matches) {
                document.addEventListener('mousemove', (e) => {
                    gsap.to(group.rotation, { x: (e.clientY/innerHeight)*0.2, y: (e.clientX/innerWidth)*0.2, duration: 2 });
                });
            }
        }
        initThreeJS();

        // --- Custom Cursor ---
        const cursor = document.getElementById('custom-cursor');
        if (window.matchMedia("(pointer: fine)").matches) {
            window.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px';
            });
        }
    </script>
</body>

</html>
